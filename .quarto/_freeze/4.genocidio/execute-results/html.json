{
  "hash": "5a295780e21be28b3e7b8c2c8e139158",
  "result": {
    "engine": "knitr",
    "markdown": "# El Genocidio\n\n## Víctimas del genocidio\n\nVíctimas del genocidio a partir del 7 de octubre de 2023.\n\nObtener datos mediante API.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Paquetes\nlibrary(httr2)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(dplyr)\nlibrary(cowplot)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Casualties_daily\n# Connect to API and download data\nresp <- httr2::request(\"https://data.techforpalestine.org/api/v2/\") |> \n  # Then we location on path\n  httr2::req_url_path_append(\"casualties_daily.json\") |> \n  httr2::req_perform()\n\n# transform to df\ndf <- resp |>\n  httr2::resp_body_json(check_type = FALSE, \n                        simplifyVector = TRUE) \n\n# Preprocesamiento\ndf <- df |>\n  mutate(across(report_date, ~ymd(.x)))\n```\n:::\n\n\n\n\nUn total de 64\\,231 personas asesinadas en Gaza desde el 7 de octubre de 2023.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |>\n  ## HAcer plot\n  ggplot(aes(x = report_date,\n             y = killed_cum)) +\n  geom_col(fill = \"#dc0e34\") +\n  scale_x_date(expand = c(0.1,0.1))+\n  scale_y_continuous(expand = c(0,0),\n                     labels = scales::comma)+\n  labs(x = \"Fecha\", \n       y = \"Personas asesinadas (acumulado)\", \n       fill = \"Sexo\") +\n  # Poner tema cowplot\n  theme_cowplot()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 7 rows containing missing values or values outside the scale range\n(`geom_col()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](4.genocidio_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n## Víctimas por sexo y edad\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Killed in Gaza\n# Connect to API and download data\nresp <- httr2::request(\"https://data.techforpalestine.org/api/v2/\") |> \n  # Then we location on path\n  httr2::req_url_path_append(\"killed-in-gaza.min.json\") |> \n  httr2::req_perform()\n\n# transform to df\ndf <- resp |>\n  httr2::resp_body_json(check_type = FALSE, \n                        simplifyVector = TRUE) \n\n# Preprocesamiento\ndf <- df |>\n  # Transformar niveles de sexo\n  mutate(across(sex, ~ifelse(.x == \"m\", \"Masculino\", \"Femenino\"))) |>\n  mutate(age_c = cut(age,\n                           breaks = seq(0,100,5),\n                           labels = seq(5,100,5),\n                           right = FALSE)) |>\n  group_by(age_c, sex) |>\n  count() |>\n  ungroup() |>\n  mutate(pop = case_when(\n      sex == \"Masculino\" ~ -n,\n      TRUE ~ n\n    ))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |>\n  ## HAcer plot\n  ggplot(aes(x = pop,\n             y = age_c,\n             fill = sex)) +\n  geom_col() +\n  scale_fill_manual(values = c(\"#f49a28\", \"#0dab9b\")) +\n  scale_x_continuous(expand = c(0,0))+\n  scale_y_discrete(expand = c(0,0))+\n  labs(x = \"Número de personas\", \n       y = \"Personas asesinadas\", \n       fill = \"Sexo\") +\n  # Poner tema cowplot\n  theme_cowplot()\n```\n\n::: {.cell-output-display}\n![](4.genocidio_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\nGraficas de barra (barplot)\n- barplot clasico: número de periodistas asesinados, ver nota https://aje.io/ieh8dd\n\n- barplot horizontal en dos partes (tipo pirámides de edad hombre/mujer) que contrastan cada año número de victimas de violencias israelis y palestinos (datos en https://fr.statista.com/statistiques/1328063/nombre-victmes-palestiniens-israeliens-israel/) y https://visualizingpalestine.org/visual/timeline-of-violence-october-2023/\n\n\n\n\n\n",
    "supporting": [
      "4.genocidio_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}